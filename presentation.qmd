---
title: "üìà RentaGT"
subtitle: "Predicci√≥n de Precio de Alquileres en Ciudad de Guatemala (CRISP-DM)"
author: |
  - Kristopher Javier Alvarado L√≥pez (Carn√©: 21188)  
  - Melissa (Carn√©: 21212)
  - Herber Sebasti√°n Silva Mu√±oz
format:
  revealjs:
    theme: solarized
    transition: fade
    slide-number: true
    incremental: true
    toc: false
execute:
  echo: false
  warning: false
  message: false
---

## 1) Introducci√≥n ‚Äî Contexto del Negocio

**RentaGT** (proptech, zonas **1‚Äì18** + **Carretera al Salvador**):  
- Marketplace + equipo comercial.  
- Ingresos por **comisi√≥n** y **servicios premium**.  
- Mercado **heterog√©neo** por zona/tipo ‚Üí peque√±as variaciones de precio impactan **DoM** y **conversi√≥n**.

---

## 2) Introducci√≥n ‚Äî Objetivos & Metodolog√≠a

**Objetivo**: Recomendaci√≥n de **precio de alquiler (`rent_price_gtq`)** con **intervalo** y **explicaciones**.  
**Metodolog√≠a**: **CRISP-DM** (fase 1).  
**√âxito de negocio** (ilustrativo): reducir error y DoM para capturar **‚â• GTQ 40k/mes**.

---

## 3) Comprensi√≥n ‚Äî Definici√≥n del Problema de ML

- **Tipo**: Regresi√≥n (precio mensual en GTQ).  
- **Inputs**: zona, tipo, tama√±o, habitaciones/ba√±os, antig√ºedad, piso/elevador, amenities, distancias, vista, ruido.  
- **Output**: **precio recomendado + [p5, p95]** y **explicabilidad** (importancias/PDP).

---

## 4) Datos ‚Äî ¬øC√≥mo se genera el dataset?

**Fuente**: `src/data_generation.py` (tu script).  
- **Zonas** con configuraci√≥n: `base_price_m2`, peso muestral, % apartamentos, distancia t√≠pica a negocios, prob. de seguridad/amenities.  
- **Tama√±os** coherentes por tipo y zona (m√°s compactos en zonas verticales: 10/14/9/4/13/15; casas m√°s grandes en **CES/16/15**).  
- **Entorno**: distancias, **vista** (mejor en 15/16/CES/14), **ruido** (mayor en 10/9/4/13/1).  
- **Target** por **f√≥rmula explicable** (multiplicadores + aditivos) + ruido de mercado.

---

## 5) Datos ‚Äî Variables Clave (MVP)

- **Categor√≠as**: `zone`, `property_type`, `age_bucket`, `is_premium_zone`.  
- **Num√©ricas**: `size_m2`, `bedrooms`, `bathrooms`, `age_years`, `floor`, `price_per_m2`.  
- **Binarias** (amenities): `has_security`, `has_pool`, `has_gym`, `has_social`, `furnished`, `balcony`, `garden`, `parking_spaces`, `pet_friendly`.  
- **Entorno**: `distance_to_business_km`, `distance_to_transit_km`, `view_quality` (1‚Äì5), `noise_level` (1‚Äì5).  
- **Target**: `rent_price_gtq`.

---

## 6) EDA ‚Äî Insights de Distribuci√≥n (seg√∫n script)

- **Mix por zona**: mayor **proporci√≥n de apartamentos** en **10/14/9/4/13/15**; m√°s **casas** en **2/5/6/7/11/12/17/18/CES**.  
- **Tama√±o (m¬≤)**: aptos ~**72‚Äì85 m¬≤** (verticales m√°s compactos); casas ~**135‚Äì160+ m¬≤** (m√°s en CES/16/15).  
- **Antig√ºedad**: menor en **10/14/15/16/4/13**.  
- **Elevador/piso**: edificios altos en verticales; **prima por pisos ‚â• 8** con elevador.

---

## 7) EDA ‚Äî Drivers del Precio (de la f√≥rmula)

**Multiplicadores (m):**
- `m_age` ‚Üì con antig√ºedad (‚Äì0.6% por a√±o, tope 40).  
- `m_view` ‚Üë con vista (+3% por nivel sobre 3).  
- `m_noise` ‚Üì con ruido (‚Äì2.5% por nivel sobre 3).  
- `m_floor` ‚Üë en aptos (‚â•4: +3%; ‚â•8 con elevador: +6%).  
- `m_center` y `m_transit` penalizan **distancias** v√≠a `log1p(.)`.  

**Aditivos (GTQ):** estacionamientos (**+175 c/u**), seguridad (**+250**), piscina (**+220**), gym (**+150**), social (**+120**), amueblado (**+350**), balc√≥n (**+90**), jard√≠n (**+180**), pet (**+60**).

---

## 8) EDA ‚Äî Zonas (precio base m¬≤)

**Top zonas por `base_price_m2` (GTQ/m¬≤):**  
**Z14 ~158**, **Z10 ~148**, **Z16 ~140**, **Z15 ~138**, **CES ~130**, **Z9 ~120**, **Z4 ~115**, **Z13 ~110**.  
‚û° Esperamos **`price_per_m2`** y **`rent_price_gtq`** mayores en estas zonas; **distribuciones** sesgadas a aptos en 10/14/9/4/13/15.

---

## 9) EDA ‚Äî Correlaciones esperadas con `rent_price_gtq`

- **(+)** `size_m2`, `view_quality`, `parking_spaces`, `has_security`, `has_pool`, `has_gym`, `furnished`, `is_premium_zone`.  
- **(‚Äì)** `age_years`, `noise_level`, `distance_to_business_km`, `distance_to_transit_km`.  
- **Segmentos**: **premium** (10/14/15/16/CES) con **MAPE** objetivo m√°s estricto.

---

## 10) Objetivos SMART (ML)

- **Exactitud**: **MAPE ‚â§ 12%** global; **RMSE ‚â§ 950 GTQ**.  
- **Robustez**: MAPE **‚â§ 10%** en zonas **premium**.  
- **Operabilidad**: **100%** de runs con m√©tricas/artefactos en **MLflow**.  
- **Adopci√≥n**: **precio + [p5, p95]** y **explicaciones** para asesores.

---

## 11) Alcance (In/Out) ‚Äî MVP

**Incluye**: Regresi√≥n de **precio**, explicabilidad (importancias, **PDP/ICE**), **MLflow**, validaci√≥n por **estratos** (premium vs. no).  
**Excluye**: **DoM**/prob. de cierre, fraude/valuaci√≥n comercial, pagos/contrataci√≥n.

---

## 12) M√©tricas de √âxito

- **Negocio**: Œî Ingresos/mes, Œî DoM, % publicaciones con precio recomendado.  
- **Modelo**: RMSE, MAE, **MAPE**, R¬≤; MAPE **por zona**; **calibration error**.  
- **Operaci√≥n**: latencia **< 300 ms** (API local), *uptime*.

---

## 13) Plan de Experimentos

1) **Baseline**: `LinearRegression` + One-Hot (`zone`, `property_type`).  
2) **√Årboles**: `RandomForestRegressor`, `XGBoost` / `LightGBM`.  
3) **Regularizados**: `Ridge`/`Lasso`/`ElasticNet`.  
4) **Evaluaci√≥n estratificada**: premium vs. no; apartamento vs. casa.

---

## 14) Validaci√≥n & Partici√≥n

- **K-Fold** estratificado por **is_premium_zone**.  
- Chequeo de **leakage**; considerar separaci√≥n temporal si aplica.  
- Reporte de m√©tricas **global** y por **segmento**; **intervalos [p5, p95]** por predicci√≥n.

---

## 15) MLflow ‚Äî Tracking & Registro

- **Experimento**: `rent-gtq-price-prediction`  
- **Tags**: `model={linreg|rf|xgb|lgbm}`, `features={baseline|+amenities|+geo}`, `seed`, `split`.  
- **M√©tricas**: RMSE/MAE/MAPE/R¬≤, MAPE por zona, calibration.  
- **Artefactos**: importancias, residuales, **PDP/ICE**, **conf_interval**, esquema.  
- **Modelo registrado**: `models:/rent-gtq-regressor`.

---

## 16) Entrega para el Negocio

- **Precio recomendado** + **banda [p5, p95]**.  
- **Explicaciones locales** (SHAP/feature importance por listing).  
- **Controles**: reglas m√≠n./m√°x. por zona, flags de extrapolaci√≥n.

---

## 17) Integraci√≥n Operativa (MVP)

- **API** de predicci√≥n (**FastAPI**).  
- **Docker** (imagen + compose opcional).  
- **Inference logging** para monitoreo de **drift** y calidad.  
- (Opcional) **Feast** como Feature Store.

---

## 18) Roadmap (6‚Äì8 semanas)

| Semana | Entregable |
|---|---|
| 1 | Fase 1 ‚Äî Comprensi√≥n (este deck) |
| 2 | Fase 2 ‚Äî EDA & supuestos |
| 3‚Äì4 | Prep & Modelado (MLflow) |
| 5 | Evaluaci√≥n & Scorecards |
| 6 | Despliegue (API + Docker) |
| 7‚Äì8 | Extras: Feast, monitoreo, CI/CD |

---

## 19) Riesgos, √âtica y Cumplimiento

- **Privacidad**: sin PII; al migrar a datos reales ‚Üí anonimizaci√≥n.  
- **√âtica**: sesgos por zona ‚Üí m√©tricas por segmento.  
- **T√©cnicos**: overfitting / leakage ‚Üí CV & validaciones; **domain gap** vs. datos reales.  
- **Sostenibilidad**: versionado de datos/modelos, reproducibilidad.

---

## 20) Cierre ‚Äî Pr√≥ximos Pasos

- **Validar EDA** con dataset generado (n, seed).  
- Definir **baseline** y primeras comparativas.  
- Acordar **criterios de adopci√≥n** con Comercial/Operaciones.  

**Meta**: MVP con precio + intervalo + explicaciones listo para prueba con asesores.

